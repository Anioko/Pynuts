{% showonmatch 'tr td' %}
  <table>
    <thead>
      <tr>
      {%- for field_name in view_class.table_columns %}
        {%- if field_name != 'csrf_token' %}
        <th>{{ view_class.table_fields[field_name].label.text }}</th>
        {%- endif -%}
      {% endfor -%}
      {%- if view_class.update_endpoint %}
        <th>Edit</th>
      {%- endif %}
      {%- if view_class.delete_endpoint %}
        <th>Delete</th>
      {% endif -%}
      </tr>
    </thead>
    <tbody>
    {%- for view in view_class.query(query) %}
      <tr>
      {%- for column in view_class.table_columns %}
        <td>
          {%- if endpoint -%}
            <a href="{{ endpoint(view=view) }}">
          {%- elif view.read_endpoint -%}
            <a href="{{ view.action_url_for('read') }}">
          {%- endif -%}
          {{ view.TableForm(obj=view.data)[column] | data }}
          {%- if endpoint or view.read_endpoint -%}
            </a>
          {%- endif -%}
        </td>
      {%- endfor %}
      {%- if view.update_endpoint %}
        <td><a href="{{ view.action_url_for('update') }}">></a></td>
      {%- endif %}
      {%- if view.delete_endpoint %}
        <td><a href="{{ view.action_url_for('delete') }}">x</a></td>
      {%- endif %}
      </tr>
    {%- endfor %}
    </tbody>
  </table>
{% endshowonmatch %}
