{% showonmatch 'tr td' %}
    <table>
      <tr>
        {% for column in cls.table_columns %}
          {% set field = cls.Form()[column] %}
          <th>{{ field.label() }}</th>
        {% endfor %}
        {% if cls.edit_endpoint %}
          <th>Edit</th>
        {% endif %}
        {% if cls.delete_endpoint %}
          <th>Delete</th>
        {% endif %}
      </tr>
      
      {% for obj in cls.query(query) %}
        <tr>
          {% for column in cls.table_columns %}
            <td>
              {% if endpoint %}
                <a href="{{ endpoint(obj=obj) }}">
              {% elif obj.view_endpoint %}
                <a href="{{ obj.action_url_for('view') }}">
              {% endif %}
              {{ obj.data[column] }}
              {% if endpoint or obj.view_endpoint %}
                </a>
              {% endif %}
            </td>
          {% endfor %}
          {% if obj.edit_endpoint %}
            <td><a href="{{ obj.action_url_for('edit') }}">></a></td>
          {% endif %}
          {% if obj.delete_endpoint %}
          <td><a href="{{ obj.action_url_for('delete') }}">x</a></td>
          {% endif %}
        </tr>
      {% endfor %}
    </table>
{% endshowonmatch %}
